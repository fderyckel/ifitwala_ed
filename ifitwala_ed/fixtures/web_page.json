[
 {
  "breadcrumbs": null,
  "content_type": "HTML",
  "context_script": "# Helper: Build resized image URL\ndef simple_resized_url(original_url, doctype_folder, size_label):\n    if not original_url:\n        return None\n    filename = original_url.split(\"/\")[-1]\n    base_name = \".\".join(filename.split(\".\")[:-1])\n    resized_filename = f\"{size_label}_{base_name}.jpg\"\n    return f\"/files/gallery_resized/{doctype_folder}/{resized_filename}\"\n\n# Fetch school\nschool_slug = frappe.form_dict.name\nschool = frappe.get_doc(\"School\", {\"website_slug\": school_slug})\ncontext.school = school\n\n# Process gallery images\nfor img in context.school.gallery_image:\n    if img.school_image:\n        img.resized_school_image_small = simple_resized_url(img.school_image, \"school\", \"small\")\n        img.resized_school_image_medium = simple_resized_url(img.school_image, \"school\", \"medium\")\n        img.resized_school_image_large = simple_resized_url(img.school_image, \"school\", \"large\")\n\n# Process leaders\ncontext.leaders = frappe.get_all(\n    \"Employee\",\n    filters={\n        \"school\": school.name,\n        \"department\": \"Academic Leadership\",\n        \"show_on_website\": 1\n    },\n    fields=[\"employee_full_name\", \"employee_image\", \"designation\", \"small_bio\"],\n    order_by=\"modified desc\"\n)\n\nfor leader in context.leaders:\n    if leader.employee_image:\n        leader.resized_employee_image = simple_resized_url(leader.employee_image, \"employee\", \"small\")\n    else:\n        leader.resized_employee_image = None\n\n# Process academic staff\ncontext.academic_staff = frappe.get_all(\n    \"Employee\",\n    filters={\n        \"school\": school.name,\n        \"show_on_website\": 1,\n        \"department\": [\"!=\", \"Academic Leadership\"]\n    },\n    fields=[\"employee_full_name\", \"employee_image\", \"designation\", \"small_bio\"],\n    order_by=\"modified desc\"\n)\n\nfor person in context.academic_staff:\n    if person.employee_image:\n        person.resized_employee_image = simple_resized_url(person.employee_image, \"employee\", \"small\")\n    else:\n        person.resized_employee_image = None\n        \ncontext.programs = frappe.get_all(\n    \"Program\",\n    filters={\n        \"school\": school.name,\n        \"is_published\": 1\n    },\n    fields=[\n        \"name\",                  # primary key / route\n        \"program_name\",\n        \"program_abbreviation\",\n        \"program_image\",\n        \"description\",\n        \"is_featured\"\n    ],\n    order_by=\"is_featured desc, program_name asc\",\n    limit_page_length=6\n)\n    \nfor prog in context.programs:\n    prog[\"small_img\"]   = simple_resized_url(prog[\"program_image\"], \"program\", \"small\")\n    prog[\"description\"] = prog.get(\"description\") or \"\"      # never None    ",
  "css": "",
  "docstatus": 0,
  "doctype": "Web Page",
  "dynamic_route": 1,
  "dynamic_template": 0,
  "enable_comments": 0,
  "end_date": null,
  "full_width": 1,
  "header": null,
  "insert_style": 1,
  "javascript": "",
  "main_section": null,
  "main_section_html": "<!-- Opinionated Design Assets from Ifitwala Ed App -->\n<link rel=\"stylesheet\" href=\"/assets/ifitwala_ed/website/school.css\" onerror=\"console.warn('Could not load school.css')\">\n<script src=\"/assets/ifitwala_ed/website/school.js\" defer onerror=\"console.warn('Could not load school.js')\"></script>\n\n{% if school.gallery_image %}\n<div id=\"schoolCarousel\" class=\"carousel slide mb-8\" data-bs-ride=\"carousel\">\n  <div class=\"carousel-inner\">\n    {% for img in school.gallery_image %}\n    {% if img.school_image %}\n    <div class=\"carousel-item {{ 'active' if loop.index == 1 else '' }}\">\n      <div class=\"hero-img-wrapper\" style=\"background-image: url('{{ img.resized_school_image_small or img.resized_school_image_medium or img.school_image }}'); background-size: cover; background-position: center;\">\n        <img src=\"{{ img.resized_school_image_medium or img.resized_school_image_large or img.school_image }}\"\n             loading=\"lazy\"\n             alt=\"{{ img.caption or 'School Image' }}\"\n             class=\"hero-img fade-in-real-image\">\n\n        {% if img.caption %}\n          <div class=\"school-caption bottom-left\">\n            {{ img.caption }}\n          </div>\n        {% endif %}\n      </div>\n    </div>\n    {% endif %}\n    {% endfor %}\n  </div>\n\n  <button class=\"carousel-control-prev\" type=\"button\" data-bs-target=\"#schoolCarousel\" data-bs-slide=\"prev\">\n    <span class=\"carousel-control-prev-icon\"></span>\n  </button>\n  <button class=\"carousel-control-next\" type=\"button\" data-bs-target=\"#schoolCarousel\" data-bs-slide=\"next\">\n    <span class=\"carousel-control-next-icon\"></span>\n  </button>\n</div>\n{% endif %}\n\n\n\n<!-- Core Values -->\n<h2 class=\"text-center fw-bold display-6 my-5\">Our Educational Philosophy</h2>\n<div class=\"section-divider\"></div>\n\n<section class=\"container my-5\">\n  <div class=\"row g-4 align-items-stretch\">\n    {% set sections = school.school_philosophy.split('<h2>') %}\n    {% for raw in sections[1:] %}\n      {% set content = raw.split('</h2>') %}\n      <div class=\"col-12 col-md-6 col-lg-4 d-flex\">\n        <div class=\"card h-100 w-100 border-0 shadow-sm philosophy-card fade-in-up\">\n          <div class=\"card-body d-flex flex-column\">\n            <div class=\"text-center mb-3\">\n              <div class=\"icon mb-2\" style=\"font-size: 2rem;\">{% if loop.index == 1 %}üè´{% elif loop.index == 2 %}üåç{% else %}üí°{% endif %}</div>\n              <h3 class=\"card-title fw-bold fs-4 mb-1\">{{ content[0] }}</h3>\n              <div class=\"decor-bar mx-auto mb-3\"></div>\n            </div>\n            <div class=\"card-text text-muted flex-grow-1\">\n              {{ content[1] | safe }}\n            </div>\n          </div>\n        </div>\n      </div>\n    {% endfor %}\n  </div>\n</section>\n\n\n\n\n<!-- programs grid -->\n<h2 class=\"text-center fw-bold display-6 my-5\">Academic Programs</h2>\n<div class=\"section-divider\"></div>\n\n{% if programs %}\n<section class=\"container my-5\">\n  <h2 class=\"text-center fw-bold display-6 mb-4\">Our Programs</h2>\n\n  <div class=\"row g-4 align-items-stretch\">\n    {% for p in programs %}\n    <div class=\"col-12 col-md-6 col-lg-4 d-flex\">\n      <a href=\"/academics/program/{{ p.name }}\" class=\"card h-100 w-100 text-decoration-none border-0 shadow-sm {{ 'border-primary border-2' if p.is_featured else '' }}\">\n        {% if p.program_image %}\n          <img src=\"{{ p.small_img or p.program_image }}\" \n               loading=\"lazy\"\n               class=\"card-img-top\"\n               alt=\"{{ p.program_name }}\"\n               onerror=\"this.onerror=null;this.src='{{ p.program_image }}';\">\n        {% endif %}\n        <div class=\"card-body d-flex flex-column\">\n          <h3 class=\"card-title text-center fw-bold fs-5\">{{ p.program_name }}</h3>\n          <div class=\"decor-bar mx-auto mb-2\"></div>\n          <p class=\"card-text text-muted small flex-grow-1\">\n            {{ p.description[:140] }}{% if p.description|length > 140 %}&hellip;{% endif %}\n\n          </p>\n          <span class=\"mt-2 fw-semibold text-primary text-end\">View details &rsaquo;</span>\n        </div>\n      </a>\n    </div>\n    {% endfor %}\n  </div>\n\n<div class=\"text-center mt-4\">\n    <a href=\"/files/program_guide.pdf\"\n       class=\"btn btn-primary btn-lg\">\n       Download Program&nbsp;Guide\n    </a>\n</div>\n\n\n<!-- Leadership -->\n<h2 class=\"text-center fw-bold display-6 my-5\">Leadership Team</h2>\n<div class=\"section-divider\"></div>\n\n{% if leaders %}\n<div class=\"flex flex-col justify-center items-center space-y-4 my-12\">\n  {% for person in leaders %}\n    <div class=\"leader-block\" \n         data-bs-toggle=\"tooltip\" \n         data-bs-html=\"true\" \n         title=\"<div style='max-width: 250px;'><strong>{{ person.employee_full_name }}</strong><br>{{ person.small_bio }}</div>\">\n          <img src=\"{{ person.resized_employee_image or person.employee_image or '/files/default_user.png' }}\"\n            alt=\"{{ person.employee_full_name }}\" \n            loading=\"lazy\"\n            onerror=\"this.onerror=null;this.src='{{ person.employee_image or '/files/default_user.png' }}';\">\n\n      <div class=\"leader-name\">\n        {{ person.employee_full_name }}\n      </div>\n      <div class=\"leader-role\">\n        {{ person.designation }}\n      </div>\n    </div>\n  {% endfor %}\n</div>\n{% endif %}\n\n\n\n<!-- academic staff carousel -->\n\n<h2 class=\"text-center fw-bold display-6 my-5\">Faculty &amp; Staff</h2>\n<div class=\"section-divider\"></div>\n\n{% if academic_staff %}\n<div id=\"teamCarousel\" class=\"carousel slide mb-8\" data-bs-ride=\"carousel\">\n\n  <!-- Indicators (new way) -->\n  <div class=\"carousel-indicators\">\n    {% for i in range((academic_staff|length + 1) // 2) %}\n    <button type=\"button\" data-bs-target=\"#teamCarousel\" data-bs-slide-to=\"{{ i }}\"\n      class=\"{{ 'active' if i == 0 else '' }}\" aria-current=\"{{ 'true' if i == 0 else 'false' }}\"\n      aria-label=\"Slide {{ i + 1 }}\"></button>\n    {% endfor %}\n  </div>\n\n  <!-- Carousel inner -->\n  <div class=\"carousel-inner\">\n    {% for i in range(0, academic_staff|length, 2) %}\n    <div class=\"carousel-item {{ 'active' if i == 0 else '' }}\">\n      <div class=\"row gx-4 px-4 justify-content-center\">\n\n        {% for j in [0, 1] %}\n          {% if academic_staff[i + j] %}\n          {% set person = academic_staff[i + j] %}\n          <div class=\"col-12 col-md-6 mb-4\">\n            <div class=\"team-card d-flex\">\n              <!-- Image Block -->\n              <div class=\"image-block\">\n                <img src=\"{{ person.resized_employee_image or person.employee_image or '/files/default_user.png' }}\"\n                    alt=\"{{ person.employee_full_name }}\"\n                    loading=\"lazy\"\n                    onerror=\"this.onerror=null;this.src='{{ person.employee_image or '/files/default_user.png' }}';\">\n\n              </div>\n              <!-- Text Block -->\n              <div class=\"text-block\">\n                <p>{{ person.small_bio }}</p>\n                <div>\n                  <strong>{{ person.employee_full_name }}</strong>\n                  <span>{{ person.designation }}</span>\n                </div>\n              </div>\n            </div>\n          </div>\n          {% endif %}\n        {% endfor %}\n\n      </div>\n    </div>\n    {% endfor %}\n  </div>\n\n  <!-- Controls -->\n  \n  <button class=\"carousel-control-prev\" type=\"button\" data-bs-target=\"#teamCarousel\" data-bs-slide=\"prev\">\n    <span class=\"carousel-control-prev-icon\"></span>\n  </button>\n  <button class=\"carousel-control-next\" type=\"button\" data-bs-target=\"#teamCarousel\" data-bs-slide=\"next\">\n    <span class=\"carousel-control-next-icon\"></span>\n  </button>\n</div>\n{% endif %}\n\n\n<div class=\"mb-5\"></div>\n\n\n<div class=\"section-divider\"></div>\n\n  <div class=\"text-center mt-4\">\n    <a href=\"/registration-of-interest\" class=\"btn btn-primary btn-lg\">\n      Book a School&nbsp;Visit\n    </a>\n  </div>\n</section>\n{% endif %}\n",
  "main_section_md": null,
  "meta_description": null,
  "meta_image": null,
  "meta_title": null,
  "modified": "2025-05-01 15:07:59.894877",
  "module": "School Site",
  "name": "school",
  "page_blocks": [],
  "published": 1,
  "route": "school/<name>",
  "show_sidebar": 0,
  "show_title": 0,
  "slideshow": null,
  "start_date": null,
  "text_align": "Left",
  "title": "School",
  "website_sidebar": null
 }
]
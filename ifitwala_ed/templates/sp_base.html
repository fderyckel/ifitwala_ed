{% set app_name = "Ifitwala" %}
{% set page_title = (title or 'Student Portal') %}
<!DOCTYPE html>
<html lang="{{ frappe.local.lang or 'en' }}">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="csrf-token" content="{{ csrf_token }}">
	<title>{% block page_title %}{{ page_title }}{% endblock %}</title>

	<link rel="icon" href="/assets/ifitwala_ed/favicon.ico">
	{{ include_style('/assets/ifitwala_ed/css/student_portal.bundle.css') }}

	{% block styles %}{% endblock %}
	{% block meta %}{% endblock %}
</head>
<body class="bg-light">
	<header>
		{% include "ifitwala_ed/templates/includes/sp_navbar.html" %}
	</header>

	<div class="container-fluid">
		<div class="row">
			<nav id="portalSidebar" class="col-lg-3 col-xl-2 d-lg-block bg-white border-end min-vh-100 collapse show">
				{% include "ifitwala_ed/templates/includes/sp_sidebar.html" %}
			</nav>

			<main class="col-lg-9 col-xl-10 ms-auto px-3 px-md-4 py-3">
				<section class="mb-3">
					{% include "ifitwala_ed/templates/includes/sp_breadcrumbs.html" %}
				</section>

				{% block page_header %}
				<div class="d-flex align-items-center justify-content-between mb-3">
					<h1 class="h4 mb-0">{{ page_title }}</h1>
					<div class="d-flex gap-2">{% block page_actions %}{% endblock %}</div>
				</div>
				{% endblock %}

				{% block content %}
				<section aria-labelledby="tasksLabel" class="mb-4">
					<div class="card shadow-sm">
						<div class="card-body">
							<div class="d-flex align-items-center justify-content-between mb-3">
								<h2 id="tasksLabel" class="h5 mb-0">My Tasks Calendar</h2>
								<span class="text-muted small">Coming soon</span>
							</div>
							<div id="task-calendar" class="min-vh-25"></div>
						</div>
					</div>
				</section>

				<section aria-labelledby="scheduleLabel" class="mb-4">
					<div class="card shadow-sm">
						<div class="card-body">
							<div class="d-flex align-items-center justify-content-between mb-3">
								<h2 id="scheduleLabel" class="h5 mb-0">Schedule Calendar</h2>
								<span class="text-muted small">FullCalendar integration later</span>
							</div>
							<div id="schedule-calendar" class="min-vh-25"></div>
						</div>
					</div>
				</section>

				<section aria-labelledby="coursesLabel" class="mb-4">
					<div class="d-flex align-items-center justify-content-between mb-2">
						<h2 id="coursesLabel" class="h5 mb-0">My Courses</h2>
					</div>
					<div id="course-cards" class="row g-3">
						{# Example card (remove in production)
						<div class="col-12 col-sm-6 col-lg-4">
							<div class="card h-100 shadow-sm">
								<div class="card-body">
									<div class="d-flex align-items-start justify-content-between">
										<div>
											<h3 class="h6 mb-1">Course Title</h3>
											<p class="text-muted small mb-2">Instructor â€¢ Term</p>
										</div>
										<i class="bi bi-journal-text fs-4"></i>
									</div>
									<a class="stretched-link" href="#"></a>
								</div>
							</div>
						</div>
						#}
					</div>
				</section>

				<section aria-labelledby="moreLabel" class="mb-4">
					<h2 id="moreLabel" class="h5 mb-2">More</h2>
					<div id="extra-cards" class="row g-3">
						<div class="col-12 col-md-6 col-xl-4">
							<div class="card h-100 shadow-sm">
								<div class="card-body d-flex flex-column">
									<div class="d-flex align-items-start justify-content-between mb-2">
										<h3 class="h6 mb-0">Student Log</h3>
										<i class="bi bi-clipboard-check"></i>
									</div>
									<p class="text-muted small flex-grow-1 mb-2">View your socio-emotional notes and follow-ups.</p>
									<div><a class="btn btn-sm btn-primary" href="#">Open</a></div>
								</div>
							</div>
						</div>
						<div class="col-12 col-md-6 col-xl-4">
							<div class="card h-100 shadow-sm">
								<div class="card-body d-flex flex-column">
									<div class="d-flex align-items-start justify-content-between mb-2">
										<h3 class="h6 mb-0">Wellbeing</h3>
										<i class="bi bi-heart-pulse"></i>
									</div>
									<p class="text-muted small flex-grow-1 mb-2">Resources and check-ins.</p>
									<div><a class="btn btn-sm btn-outline-primary" href="#">Open</a></div>
								</div>
							</div>
						</div>
						<div class="col-12 col-md-6 col-xl-4">
							<div class="card h-100 shadow-sm">
								<div class="card-body d-flex flex-column">
									<div class="d-flex align-items-start justify-content-between mb-2">
										<h3 class="h6 mb-0">Demographics</h3>
										<i class="bi bi-person-vcard"></i>
									</div>
									<p class="text-muted small flex-grow-1 mb-2">Your profile and contact details.</p>
									<div><a class="btn btn-sm btn-outline-secondary" href="#">Manage</a></div>
								</div>
							</div>
						</div>
					</div>
				</section>
				{% endblock %}

				<footer class="border-top mt-4 pt-3">
					{% include "ifitwala_ed/templates/includes/sp_footer.html" %}
				</footer>
			</main>
		</div>
	</div>

	{# Load Frappe website globals before our portal bundle, so window.frappe is ready #}
	{{ include_script('/assets/frappe/js/frappe-web.bundle.js') }}

	{# Student portal bundle (includes Bootstrap JS + page modules) #}
	{{ include_script('/assets/ifitwala_ed/js/student_portal.bundle.js') }}

	{% block scripts %}{% endblock %}
</body>
</html>

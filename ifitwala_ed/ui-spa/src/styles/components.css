@reference "tailwindcss";

/* =====================================================================
   IFITWALA COMPONENT LIBRARY — ATOMS & MOLECULES
   ===================================================================== */

@layer components {
  /* ---------------------------------------------------------------
     1. Avatar (square)
     --------------------------------------------------------------- */
  .avatar {
    @apply h-16 w-16 rounded-xl overflow-hidden shadow-inner bg-slate-100 ring-1;
    --tw-ring-color: rgb(var(--border-rgb) / .85);
  }

  .avatar img {
    @apply h-full w-full object-cover;
  }


	/* ---------------------------------------------------------------
   	 TYPOGRAPHY SCALE — SEMANTIC HELPERS
		--------------------------------------------------------------- */

  .type-display {
    @apply font-semibold tracking-tight text-3xl md:text-4xl;
  }

  .type-h1 {
    @apply font-semibold tracking-tight text-2xl md:text-3xl;
  }

  .type-h2 {
    @apply font-semibold tracking-tight text-xl md:text-2xl;
  }

  .type-h3 {
    @apply font-semibold text-lg md:text-xl;
  }

  .type-body {
    @apply text-[0.95rem] md:text-base leading-relaxed;
  }

  .type-body-strong {
    @apply text-[0.95rem] md:text-base leading-relaxed font-medium;
  }

  .type-meta {
    @apply text-sm;
    color: rgb(var(--slate-rgb) / .80);
  }

  .type-caption {
    @apply text-xs;
    color: rgb(var(--slate-rgb) / .75);
  }

  .type-overline {
    @apply text-[0.7rem] font-semibold uppercase tracking-[0.16em];
    color: rgb(var(--slate-rgb) / .75);
  }

  .type-label {
    @apply text-[0.7rem] font-semibold uppercase tracking-[0.12em];
    color: rgb(var(--slate-rgb) / .75);
  }

  /* ---------------------------------------------------------------
     Reusable card + chip shells for analytics surfaces
     --------------------------------------------------------------- */
  .card-surface {
    @apply rounded-xl border shadow-sm;
    border-color: rgb(var(--border-rgb) / .65);
    background: rgb(var(--surface-rgb) / .92);
  }

  .card-surface-muted {
    @apply rounded-xl border shadow-sm;
    border-color: rgb(var(--border-rgb) / .65);
    background: rgb(var(--surface-rgb) / .88);
  }

  .chip {
    @apply inline-flex items-center rounded-full px-2 py-0.5 text-[11px] font-semibold border;
    border-color: rgb(var(--border-rgb) / .65);
    background: rgb(var(--surface-rgb) / .65);
    color: rgb(var(--ink-rgb) / .75);
  }

  .chip-active {
    background: #1f7a45;
    color: #fff;
    border-color: transparent;
    box-shadow: var(--shadow-soft);
  }

  .chip-alert {
    background: rgb(var(--flame-rgb) / .15);
    color: rgb(var(--flame-rgb));
    border-color: transparent;
  }

  /* ---------------------------------------------------------------
     Staff portal "palette card" — focus / task list container
     Soft shell surface, not pure white
     --------------------------------------------------------------- */
  .palette-card {
    @apply border rounded-2xl shadow-sm overflow-hidden;
    border-color: rgb(var(--border-rgb) / .90);
    background-color: rgb(var(--surface-rgb) / .98);
  }

  /* Card shell for dense tool panels */
  .card-panel {
    @apply rounded-2xl border shadow-sm;
    border-color: rgb(var(--border-rgb) / .80);
    background-color: rgb(var(--surface-rgb));
  }

  /* Toolbar strip used atop filters */
  .surface-toolbar {
    @apply rounded-2xl border px-4 py-3 shadow-sm;
    background-color: rgb(var(--surface-rgb) / .92);
    border-color: rgb(var(--border-rgb) / .80);
  }

  /* Toolbar wrapper for analytics filters */
  .toolbar {
    @apply rounded-2xl border px-4 py-3 shadow-sm flex flex-wrap items-center gap-3 mb-2;
    background-color: rgb(var(--surface-rgb) / .92);
    border-color: rgb(var(--border-rgb) / .80);
  }

  /* Calendar/attendance card */
  .attendance-card {
    @apply rounded-2xl border shadow-sm;
    border-color: rgb(var(--border-rgb) / .80);
    background-color: rgb(var(--surface-rgb));
  }

  .attendance-card-header {
    @apply mb-2 flex items-center justify-between gap-3;
  }

  .attendance-card-body {
    @apply rounded-xl border px-3 py-3 shadow-inner;
    background-color: rgb(var(--surface-rgb) / .92);
    border-color: rgb(var(--border-rgb) / .60);
  }

  .analytics-card {
    @apply rounded-2xl border px-4 py-4 shadow-sm;
    background-color: rgb(var(--surface-rgb) / .96);
    border-color: rgb(var(--border-rgb) / .85);
  }

  .chip-toggle {
    @apply rounded-full px-4 py-1 text-xs font-semibold transition;
    background-color: rgb(var(--surface-rgb) / .85);
    color: rgb(var(--ink-rgb) / .75);
  }

  .chip-toggle-active {
    background-color: rgb(var(--canopy-rgb));
    color: #fff;
    box-shadow: var(--shadow-soft);
  }

  .chip-toggle-muted {
    background-color: rgb(var(--surface-rgb) / .8);
    color: rgb(var(--ink-rgb) / .6);
  }

  .chip-scope {
    @apply rounded-full px-3 py-1 text-[11px] font-semibold transition;
  }

  .chip-scope-active {
    background-color: rgb(var(--ink-rgb));
    color: rgb(var(--surface-rgb));
  }

  .chip-scope-muted {
    background-color: rgb(var(--surface-rgb) / .85);
    color: rgb(var(--ink-rgb) / .65);
  }

  .type-chip-muted {
    @apply rounded-full px-2 py-0.5 text-[11px] font-semibold;
    background-color: rgb(var(--surface-rgb) / .8);
    color: rgb(var(--ink-rgb) / .6);
  }

  .type-empty {
    @apply text-xs text-slate-400;
  }

  .mini-kpi-card {
    @apply rounded-xl border px-3 py-2 shadow-sm;
    border-color: rgb(var(--border-rgb) / .70);
    background-color: rgb(var(--surface-rgb) / .9);
  }

  .mini-kpi-card-alert {
    background-color: rgb(var(--flame-rgb) / .1);
  }

  .mini-kpi-label {
    @apply text-[11px] uppercase tracking-wide;
    color: rgb(var(--ink-rgb) / .6);
  }

  .mini-kpi-value {
    @apply text-base font-semibold;
    color: rgb(var(--ink-rgb));
  }

  /* ---------------------------------------------------------------
     Staff portal quick-action tiles
     Stronger white card on top of the shell
     --------------------------------------------------------------- */
  .action-tile {
    @apply flex items-center gap-3 rounded-2xl border bg-white p-3 shadow-sm
           transition-transform hover:-translate-y-0.5;
    border-color: rgb(var(--border-rgb) / .90);
  }

  .action-tile:hover {
    box-shadow: var(--shadow-strong);
  }

  .action-tile__icon {
    @apply flex h-9 w-9 items-center justify-center rounded-full text-sm font-semibold;
    background-color: rgb(var(--sky-rgb) / .40);
    color: rgb(var(--canopy-rgb));
  }

  /* ---------------------------------------------------------------
     2. Section Header
     --------------------------------------------------------------- */
  .section-header {
    @apply text-xs font-semibold uppercase tracking-wide;
    color: rgb(var(--slate-rgb) / .75);
  }

  /* ---------------------------------------------------------------
     3. Inline Chip
     --------------------------------------------------------------- */
  .inline-chip {
    @apply inline-flex items-center gap-1 px-2 py-1 rounded-full
           text-xs font-medium;
  }

  .inline-chip--health {
    @apply bg-red-50 text-red-600;
  }

  .inline-chip--birthday {
    @apply bg-amber-50 text-amber-700;
  }

  /* ---------------------------------------------------------------
     4. Block Card (for single attendance row)
     Slightly raised white block
     --------------------------------------------------------------- */
	.block-card {
		@apply flex flex-col gap-3 p-3 rounded-xl border shadow-sm;
    background-color: rgb(var(--surface-rgb) / .98);
    border-color: rgb(var(--border-rgb) / .85);
	}

  /* ---------------------------------------------------------------
     5. Remark Button (blue accent)
     --------------------------------------------------------------- */
  .remark-btn {
    @apply !h-9 !w-9 rounded-full border border-transparent transition;
    color: rgb(var(--slate-rgb) / .80);
  }

  .remark-btn:hover {
    border-color: rgb(var(--jacaranda-rgb) / .30);
    background-color: rgb(var(--jacaranda-rgb) / .10);
    color: rgb(var(--jacaranda-rgb));
  }

  .remark-btn--active {
    border-color: rgb(var(--jacaranda-rgb) / .40);
    background-color: rgb(var(--jacaranda-rgb) / .15);
    color: rgb(var(--jacaranda-rgb));
  }

  /* -------------------------------------------
     6. Calendar Day Cell + Legend
     ------------------------------------------- */
  .calendar-day {
    @apply flex items-center justify-center transition-transform ease-out duration-150
           border border-transparent bg-transparent;
  }

  .calendar-day--selected .calendar-day__badge {
    background: rgb(var(--jacaranda-rgb));
    color: #fff;
    box-shadow: 0 4px 12px rgb(var(--jacaranda-rgb) / .4);
    transform: scale(1.1);
  }

  .calendar-day__badge {
    @apply inline-flex items-center justify-center rounded-full font-medium
           transition-all duration-150;
    height: 2.25rem;
    width: 2.25rem;
    border: 2px solid transparent;
    font-size: 0.9rem;
  }

  /* Today (outline, no fill) */
  .calendar-day__badge--today {
    color: rgb(var(--jacaranda-rgb));
    border-color: rgb(var(--jacaranda-rgb) / .35);
    @apply font-bold;
  }

  /* Future meeting */
  .calendar-day__badge--meeting {
    background: #fff;
    color: rgb(var(--jacaranda-rgb));
    border-color: rgb(var(--jacaranda-rgb));
    box-shadow: 0 1px 2px rgb(var(--jacaranda-rgb) / .15);
  }

  /* Recorded attendance */
  .calendar-day__badge--recorded {
    background: rgb(var(--leaf-rgb) / .06);
    color: rgb(var(--leaf-rgb));
    border-color: rgb(var(--leaf-rgb));
    box-shadow: 0 1px 2px rgb(var(--leaf-rgb) / .18);
    @apply font-semibold;
  }

  /* Missing */
  .calendar-day__badge--missing {
    background: rgb(var(--flame-rgb) / .04);
    color: rgb(var(--flame-rgb));
    border-color: rgb(var(--flame-rgb));
    box-shadow: 0 0 0 1px rgb(var(--flame-rgb) / .55);
    @apply font-semibold;
  }

  /* Muted */
  .calendar-day__badge--muted {
    color: rgb(var(--slate-rgb) / .35);
  }

  /* Hover for clickable meeting days
     (was rgba(255, 255, 255, 0.96) — now rgb() with / alpha)
  */
  .calendar-day:hover .calendar-day__badge--meeting,
  .calendar-day:hover .calendar-day__badge--recorded,
  .calendar-day:hover .calendar-day__badge--missing {
    background: rgb(255 255 255 / .96);
    transform: translateY(-1px);
  }

  /* Legend dots */
  .legend-dot {
    @apply rounded-full border-2 border-solid bg-white;
    height: 0.9rem;
    width: 0.9rem;
  }

  .legend-dot--recorded {
    border-color: rgb(var(--leaf-rgb));
  }

  .legend-dot--scheduled {
    border-color: rgb(var(--jacaranda-rgb));
  }

  .legend-dot--missing {
    border-color: rgb(var(--flame-rgb));
  }


  /* ============================================================
     ANALYTICS SHELL & CARDS (shared across all dashboards)
     ============================================================ */

  /* Shell wrapping analytics content inside staff layout */
  .analytics-shell {
    @apply w-full max-w-6xl mx-auto flex flex-col px-5 py-9 sm:px-6 gap-6;
  }

  /* Grid for cards – auto-fit, responsive */
  .analytics-grid {
    @apply grid gap-4 md:gap-6
           grid-cols-1 md:grid-cols-2 xl:grid-cols-3;
  }

  /* Base analytics card surface */
  .analytics-card {
    @apply border rounded-2xl shadow-sm overflow-hidden p-4 sm:p-5 flex flex-col gap-3;
    border-color: rgb(var(--border-rgb) / .90);
    background-color: rgb(var(--surface-rgb) / .98);
  }

  /* Wide variant (for time-series / tables) */
  .analytics-card--wide {
    @apply md:col-span-2;
  }

  /* Card header */
  .analytics-card__title {
    @apply text-xs font-semibold uppercase tracking-wide;
    color: rgb(var(--canopy-rgb));
  }

  .analytics-card__meta {
    @apply text-[0.7rem];
    color: rgb(var(--slate-rgb) / .75);
  }

	/* Default card chart */
	.analytics-chart {
		width: 100%;
		height: 220px; /* or whatever you like for compact cards */
	}

	/* When the card is zoomed */
	.analytics-chart--expanded {
		height: min(520px, 70vh); /* grows but still bounded */
	}

  /* Empty state inside a card */
  .analytics-empty {
    @apply text-xs mt-1;
    color: rgb(var(--slate-rgb) / .70);
  }

  /* Filters bar for analytics pages (reuses surface-toolbar aesthetics) */
  .analytics-filters {
    @apply rounded-2xl border px-4 py-3 shadow-sm flex flex-wrap items-center gap-3 mb-4;
    background-color: rgb(var(--surface-rgb) / .92);
    border-color: rgb(var(--border-rgb) / .80);
  }

  .analytics-filters__title {
    @apply text-xs font-semibold uppercase tracking-wide;
    color: rgb(var(--slate-rgb) / .80);
  }

  /* ============================================================
     CANONICAL FILTER CONTROL SKIN (OPAQUE)
     Apply by wrapping filter bars with .ifit-filters
     ============================================================ */

  .ifit-filters select,
  .ifit-filters input[type="text"],
  .ifit-filters input[type="search"],
  .ifit-filters input[type="email"],
  .ifit-filters input[type="password"],
  .ifit-filters input[type="number"],
  .ifit-filters input[type="date"],
  .ifit-filters textarea {
    background-color: rgb(var(--sand-rgb) / .98);
    border-color: rgb(var(--border-rgb) / .90);
    color: rgb(var(--ink-rgb) / 1);
  }

  /* If frappe-ui FormControl uses internal inputs, catch common wrappers */
  .ifit-filters .form-control,
  .ifit-filters .control-input,
  .ifit-filters [role="combobox"] {
    background-color: rgb(var(--sand-rgb) / .98);
    border-color: rgb(var(--border-rgb) / .90);
    color: rgb(var(--ink-rgb) / 1);
  }

  /* Hover */
  .ifit-filters select:hover,
  .ifit-filters input:hover,
  .ifit-filters textarea:hover,
  .ifit-filters .form-control:hover,
  .ifit-filters .control-input:hover,
  .ifit-filters [role="combobox"]:hover {
    border-color: rgb(var(--jacaranda-rgb) / .25);
  }

  /* Focus (consistent with your style direction) */
  .ifit-filters select:focus,
  .ifit-filters input:focus,
  .ifit-filters textarea:focus,
  .ifit-filters .form-control:focus-within,
  .ifit-filters [role="combobox"]:focus-visible {
    border-color: rgb(var(--jacaranda-rgb) / .55) !important;
    box-shadow: 0 0 0 3px rgb(var(--jacaranda-rgb) / .22) !important;
    outline: none;
  }

  /* Placeholder */
  .ifit-filters input::placeholder,
  .ifit-filters textarea::placeholder {
    color: rgb(var(--slate-rgb) / .65);
  }

  /* Checkbox consistency (don't force background, just align focus) */
  .ifit-filters input[type="checkbox"]:focus-visible {
    box-shadow: 0 0 0 3px rgb(var(--jacaranda-rgb) / .22) !important;
    outline: none;
  }

  /* ============================================================
     DROPDOWN / OPTION LIST BACKGROUNDS (opaque, minimal)
     Needed for teleported menus (outside .ifit-filters)
     ============================================================ */

  /* Bootstrap-like dropdowns */
  .dropdown-menu {
    background-color: rgb(var(--sand-rgb) / .98);
    border: 1px solid rgb(var(--border-rgb) / .90);
    color: rgb(var(--ink-rgb) / 1);
  }

  /* Accessible listbox/menu patterns */
  [role="listbox"],
  [role="menu"] {
    background-color: rgb(var(--sand-rgb) / .98);
    border: 1px solid rgb(var(--border-rgb) / .90);
    color: rgb(var(--ink-rgb) / 1);
  }

  /* Hover state */
  .dropdown-item:hover,
  .dropdown-item:focus-visible,
  [role="option"]:hover,
  [role="menuitem"]:hover {
    background-color: rgb(var(--sky-rgb) / .28);
    color: rgb(var(--ink-rgb) / 1);
  }

	/* Content dialog fade, shared component skin */
	.content-dialog-fade-enter-active,
	.content-dialog-fade-leave-active {
		transition: opacity 0.18s ease-out;
	}

	.content-dialog-fade-enter-from,
	.content-dialog-fade-leave-to {
		opacity: 0;
	}


}

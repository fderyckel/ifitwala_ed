/* =====================================================================
   IFITWALA COMPONENT LIBRARY - ATOMS AND MOLECULES
   ===================================================================== */

@layer components {
  /* ============================================================
     OVERLAY SYSTEM (HeadlessUI) - single truth
     ============================================================ */
  .if-overlay-host {
    position: fixed;
    inset: 0;
  }

  /* Z-index is applied inline by OverlayHost to keep the stack explicit. */
  .if-overlay {
    position: fixed;
    inset: 0;
    pointer-events: none;
  }

  .if-overlay__backdrop {
    position: fixed;
    inset: 0;
    pointer-events: auto;
    background: rgb(var(--shade-rgb) / 0.45);
    backdrop-filter: blur(6px);
  }

  .if-overlay__wrap {
    position: fixed;
    inset: 0;
    pointer-events: none;
    display: flex;
    align-items: flex-start;
    justify-content: center;
    padding: 1.25rem 1rem;
  }

  @media (min-width: 768px) {
    .if-overlay__wrap {
      align-items: center;
      padding: 2rem;
    }
  }

  .if-overlay__panel {
    pointer-events: auto;
    width: 100%;
    max-width: 56rem;
    max-height: calc(100vh - 2.5rem);
    overflow: hidden;
    border-radius: var(--radius-xl);
    background: var(--modal-panel-gradient-bg);
    border: 1px solid rgb(var(--border-rgb) / 0.9);
    box-shadow: var(--shadow-overlay);
    color: rgb(var(--ink-rgb) / 1);
    display: flex;
    flex-direction: column;
  }

  /* Keeps legacy event modals close to their original width. */
  .if-overlay__panel--compact {
    max-width: 40rem;
  }

  .if-overlay__body {
    flex: 1;
    min-height: 0;
    overflow-y: auto;
    padding: 1.25rem;
  }

  .if-overlay__footer {
    flex-shrink: 0;
    border-top: 1px solid rgb(var(--border-rgb) / 0.6);
    padding: 1rem 1.25rem;
    display: flex;
    justify-content: flex-end;
    gap: 0.5rem;
  }

  .if-overlay__icon-button {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    height: 2rem;
    width: 2rem;
    border-radius: 9999px;
    border: 1px solid rgb(var(--border-rgb) / 0.9);
    background-color: rgb(var(--surface-strong-rgb) / 1);
    color: rgb(var(--slate-rgb) / 0.9);
    transition: background 120ms ease, border-color 120ms ease, transform 120ms ease;
  }

  .if-overlay__icon-button:hover {
    border-color: rgb(var(--leaf-rgb) / 0.9);
    color: rgb(var(--canopy-rgb) / 1);
    transform: translateY(-1px);
  }

  /* Transitions */
  .if-overlay__fade-enter,
  .if-overlay__fade-leave {
    transition: opacity 160ms ease-out;
  }

  .if-overlay__fade-from {
    opacity: 0;
  }

  .if-overlay__fade-to {
    opacity: 1;
  }

  .if-overlay__panel-enter,
  .if-overlay__panel-leave {
    transition: opacity 180ms ease-out, transform 180ms ease-out;
  }

  .if-overlay__panel-from {
    opacity: 0;
    transform: translateY(12px) scale(0.98);
  }

  .if-overlay__panel-to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }

  /* Legacy Frappe UI dialogs (kept until they migrate to overlay stack). */
  .fui-dialog-backdrop {
    background: rgb(var(--shade-rgb) / 0.4);
    backdrop-filter: blur(6px);
  }

  .fui-dialog-panel {
    background-color: rgb(var(--surface-strong-rgb) / 1);
    border-radius: var(--radius-xl);
    border: 1px solid rgb(var(--border-rgb) / 0.85);
    box-shadow: var(--shadow-overlay);
    padding: 1rem;
    color: rgb(var(--ink-rgb) / 1);
  }

  .fui-dialog-title {
    font-size: 1rem;
    font-weight: 600;
    margin-bottom: 0.5rem;
    color: rgb(var(--ink-rgb) / 1);
  }

  .fui-dialog-body {
    font-size: 0.875rem;
    color: rgb(var(--slate-rgb) / 0.85);
  }

  .fui-dialog-footer {
    margin-top: 1rem;
    display: flex;
    justify-content: flex-end;
    gap: 0.5rem;
  }

  .content-dialog .fui-dialog-header,
  .content-dialog .fui-dialog-title,
  .content-dialog .fui-dialog-close {
    display: none;
  }

  /* ============================================================
     TYPOGRAPHY HELPERS - SEMANTIC SCALE
     ============================================================ */
  .type-display {
    @apply font-semibold tracking-tight text-3xl md:text-4xl;
  }

  .type-h1 {
    @apply font-semibold tracking-tight text-2xl md:text-3xl;
  }

  .type-h2 {
    @apply font-semibold tracking-tight text-xl md:text-2xl;
  }

  .type-h3 {
    @apply font-semibold text-lg md:text-xl;
  }

  .type-body {
    @apply text-[0.95rem] md:text-base leading-relaxed;
  }

  .type-body-strong {
    @apply text-[0.95rem] md:text-base leading-relaxed font-medium;
  }

  .type-meta {
    @apply text-sm;
    color: rgb(var(--slate-rgb) / 0.80);
  }

  .type-caption {
    @apply text-xs;
    color: rgb(var(--slate-rgb) / 0.75);
  }

  .type-overline {
    @apply text-[0.7rem] font-semibold uppercase tracking-[0.16em];
    color: rgb(var(--slate-rgb) / 0.75);
  }

  .type-label {
    @apply text-[0.7rem] font-semibold uppercase tracking-[0.12em];
    color: rgb(var(--slate-rgb) / 0.75);
  }

  .type-button-label {
    @apply text-xs font-semibold tracking-[0.06em];
  }

  .type-badge-label {
    @apply text-[0.65rem] font-semibold tracking-[0.08em];
  }

  .type-empty {
    @apply text-xs;
    color: rgb(var(--slate-rgb) / 0.55);
  }

  .section-header {
    @apply text-xs font-semibold uppercase tracking-wide;
    color: rgb(var(--slate-rgb) / 0.75);
  }

  /* ============================================================
     SURFACES AND CARDS
     ============================================================ */
  .avatar {
    @apply h-16 w-16 rounded-xl overflow-hidden;
    background-color: rgb(var(--sky-rgb) / 0.55);
    box-shadow: inset 0 0 0 1px rgb(var(--border-rgb) / 0.85);
  }

  .avatar img {
    @apply h-full w-full object-cover;
  }

  .card-surface {
    @apply rounded-xl border shadow-sm;
    border-color: rgb(var(--border-rgb) / 0.65);
    background: rgb(var(--surface-rgb) / 0.92);
  }

  .paper-card {
    @apply border rounded-2xl shadow-sm;
    background-color: rgb(var(--surface-strong-rgb) / 1);
    border-color: rgb(var(--border-rgb) / 0.90);
  }

  .palette-card {
    @apply border rounded-2xl shadow-sm overflow-hidden;
    border-color: rgb(var(--border-rgb) / 0.90);
    background-color: rgb(var(--surface-rgb) / 0.98);
  }

  .card-panel {
    @apply rounded-2xl border shadow-sm;
    border-color: rgb(var(--border-rgb) / 0.80);
    background-color: rgb(var(--surface-rgb) / 1);
  }

  /* ============================================================
     LIST ROWS (FOCUS LIST, ETC.)
     ============================================================ */
  .if-list-row {
    display: flex;
    align-items: flex-start;
    gap: 1rem;
    padding: 1rem 1.5rem;
    width: 100%;
    text-align: left;
    background: white;
    border-bottom: 1px solid rgb(var(--sand-rgb) / 0.35);
    transition: background-color 160ms ease, transform 160ms ease, box-shadow 160ms ease;
  }

  .if-list-row:last-child {
    border-bottom: 0;
  }

  .if-list-row:hover {
    background: rgb(var(--sky-rgb) / 0.2);
  }

  .if-list-row:focus-visible {
    outline: none;
    box-shadow: 0 0 0 3px rgb(var(--jacaranda-rgb) / 0.25);
  }

  .if-list-row--disabled {
    opacity: 0.6;
    cursor: not-allowed;
  }

  .if-list-row__dot {
    margin-top: 0.2rem;
    height: 1.25rem;
    width: 1.25rem;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 0.35rem;
    border: 2px solid rgb(var(--slate-token-rgb) / 0.35);
  }

  .if-list-row__dot-inner {
    display: block;
    height: 0.5rem;
    width: 0.5rem;
    border-radius: 999px;
    background: rgb(var(--slate-token-rgb) / 0.45);
  }

  .if-list-row__right {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    flex-shrink: 0;
  }

  .if-dot--action {
    background: rgb(var(--canopy-rgb) / 0.9);
  }

  .if-dot--review {
    background: rgb(var(--jacaranda-rgb) / 0.9);
  }

  .if-dot--muted {
    background: rgb(var(--slate-token-rgb) / 0.35);
  }

  .if-skel {
    border-radius: 999px;
    background: rgb(var(--sand-rgb) / 0.55);
  }

  .if-skel--title {
    height: 0.9rem;
    width: 70%;
  }

  .if-skel--sub {
    height: 0.75rem;
    width: 55%;
  }

  .if-skel--badge {
    height: 1.2rem;
    width: 3.5rem;
    border-radius: 999px;
  }

  .surface-toolbar {
    @apply rounded-2xl border px-4 py-3 shadow-sm;
    background-color: rgb(var(--surface-rgb) / 0.92);
    border-color: rgb(var(--border-rgb) / 0.80);
  }

  /* Header controls within the staff layout. */
  .staff-layout__brand {
    color: rgb(var(--ink-rgb) / 1);
  }

  .staff-layout__brand-link {
    @apply transition-colors;
  }

  .staff-layout__brand-link:hover {
    color: rgb(var(--canopy-rgb) / 1);
  }

  .staff-layout__desk-switch {
    @apply inline-flex items-center gap-1.5
           px-3 py-1.5 rounded-full
           border
           shadow-sm transition;
    background-color: rgb(var(--surface-strong-rgb) / 0.95);
    border-color: rgb(var(--border-rgb) / 0.95);
    color: rgb(var(--slate-rgb) / 0.90);
  }

  .staff-layout__desk-switch:hover {
    border-color: rgb(var(--leaf-rgb) / 1);
    background-color: rgb(var(--leaf-rgb) / 0.10);
    color: rgb(var(--canopy-rgb) / 1);
  }

  /* ============================================================
     CHIPS, TOGGLES, KPI STRIPS
     ============================================================ */
  .if-action {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.375rem 0.75rem;
    border-radius: 9999px;
    border: 1px solid rgb(var(--border-rgb) / 0.95);
    background-color: rgb(var(--surface-strong-rgb) / 1);
    color: rgb(var(--ink-rgb) / 0.7);
    box-shadow: var(--shadow-soft);
    transition: background 120ms ease, border-color 120ms ease, color 120ms ease;
  }

  .if-action:hover {
    border-color: rgb(var(--leaf-rgb) / 0.9);
    color: rgb(var(--leaf-rgb) / 1);
  }

  .if-pill {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.375rem 0.75rem;
    border-radius: 9999px;
    border: 1px solid rgb(var(--border-rgb) / 0.85);
    background-color: rgb(var(--surface-strong-rgb) / 0.92);
    color: rgb(var(--ink-rgb) / 0.75);
    transition: background 150ms ease, border-color 150ms ease, color 150ms ease;
  }

  .if-pill--on {
    border-color: rgb(var(--leaf-rgb) / 0.9);
    background-color: rgb(var(--leaf-rgb) / 0.08);
    color: rgb(var(--canopy-rgb) / 1);
  }

  .if-pill--off {
    border-color: rgb(var(--border-rgb) / 0.9);
    background-color: rgb(var(--surface-strong-rgb) / 0.9);
    color: rgb(var(--ink-rgb) / 0.7);
  }

  .if-pill--class {
    background-color: rgb(var(--jacaranda-rgb) / 0.1);
    color: rgb(var(--jacaranda-rgb) / 1);
    border-color: rgb(var(--jacaranda-rgb) / 0.35);
  }

  .if-pill--meeting {
    background-color: rgb(var(--flame-rgb) / 0.12);
    color: rgb(var(--flame-rgb) / 1);
    border-color: rgb(var(--flame-rgb) / 0.35);
  }

  .if-pill--school {
    background-color: rgb(var(--leaf-rgb) / 0.1);
    color: rgb(var(--leaf-rgb) / 1);
    border-color: rgb(var(--leaf-rgb) / 0.35);
  }

  .if-pill--holiday {
    background-color: rgb(var(--slate-rgb) / 0.12);
    color: rgb(var(--slate-rgb) / 0.95);
    border-color: rgb(var(--slate-rgb) / 0.25);
  }

  .if-pill__dot {
    display: inline-flex;
    height: 0.625rem;
    width: 0.625rem;
    flex-shrink: 0;
    border-radius: 9999px;
    background-color: rgb(var(--border-rgb) / 0.8);
  }

  .if-pill__dot--scheduled {
    background-color: rgb(var(--jacaranda-rgb) / 0.9);
  }

  .if-pill__dot--holiday {
    background-color: rgb(var(--slate-rgb) / 0.75);
  }

  .if-pill__dot--muted {
    background-color: rgb(var(--slate-rgb) / 0.35);
  }

  .if-pill__count {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 0.125rem 0.5rem;
    border-radius: 9999px;
    background-color: rgb(var(--surface-strong-rgb) / 0.7);
    color: rgb(var(--ink-rgb) / 0.7);
  }

  .chip {
    @apply inline-flex items-center rounded-full px-2 py-0.5 text-[11px] font-semibold border;
    border-color: rgb(var(--border-rgb) / 0.65);
    background: rgb(var(--surface-rgb) / 0.65);
    color: rgb(var(--ink-rgb) / 0.75);
  }

  .chip-active {
    background: rgb(var(--leaf-rgb) / 1);
    color: rgb(var(--surface-strong-rgb) / 1);
    border-color: transparent;
    box-shadow: var(--shadow-soft);
  }

  .chip-toggle {
    @apply rounded-full px-4 py-1 text-xs font-semibold transition;
    background-color: rgb(var(--surface-rgb) / 0.85);
    color: rgb(var(--ink-rgb) / 0.75);
  }

  .chip-toggle-active {
    background-color: rgb(var(--canopy-rgb) / 1);
    color: rgb(var(--surface-strong-rgb) / 1);
    box-shadow: var(--shadow-soft);
  }

  .chip-toggle-muted {
    background-color: rgb(var(--surface-rgb) / 0.8);
    color: rgb(var(--ink-rgb) / 0.6);
  }

  .chip-scope {
    @apply rounded-full px-3 py-1 text-[11px] font-semibold transition;
  }

  .chip-scope-active {
    background-color: rgb(var(--ink-rgb) / 1);
    color: rgb(var(--surface-rgb) / 1);
  }

  .chip-scope-muted {
    background-color: rgb(var(--surface-rgb) / 0.85);
    color: rgb(var(--ink-rgb) / 0.65);
  }

  .type-chip-muted {
    @apply rounded-full px-2 py-0.5 text-[11px] font-semibold;
    background-color: rgb(var(--surface-rgb) / 0.8);
    color: rgb(var(--ink-rgb) / 0.6);
  }

  .inline-chip {
    @apply inline-flex items-center gap-1 px-2 py-1 rounded-full
           text-xs font-medium;
  }

  .mini-kpi-card {
    @apply rounded-xl border px-3 py-2 shadow-sm;
    border-color: rgb(var(--border-rgb) / 0.70);
    background-color: rgb(var(--surface-rgb) / 0.9);
  }

  .mini-kpi-card-alert {
    background-color: rgb(var(--flame-rgb) / 0.1);
  }

  .mini-kpi-label {
    @apply text-[11px] uppercase tracking-wide;
    color: rgb(var(--ink-rgb) / 0.6);
  }

  .mini-kpi-value {
    @apply text-base font-semibold;
    color: rgb(var(--ink-rgb) / 1);
  }

  /* ============================================================
     ACTION TILES
     ============================================================ */
  .action-tile {
    @apply flex items-center gap-3 rounded-2xl border p-3 shadow-sm
           transition-transform hover:-translate-y-0.5;
    background-color: rgb(var(--surface-strong-rgb) / 1);
    border-color: rgb(var(--border-rgb) / 0.90);
  }

  .action-tile:hover {
    box-shadow: var(--shadow-strong);
  }

  .action-tile__icon {
    @apply flex h-9 w-9 items-center justify-center rounded-full text-sm font-semibold;
    background-color: rgb(var(--sky-rgb) / 0.40);
    color: rgb(var(--canopy-rgb) / 1);
  }

  /* Keep staff CTA jacaranda pills solid without affecting non-CTA badges. */
  .staff-shell a.bg-jacaranda {
    background-color: rgb(var(--jacaranda-rgb) / 1);
    color: rgb(var(--surface-strong-rgb) / 1);
  }

  /* ============================================================
     CALENDAR AND ATTENDANCE WIDGETS
     ============================================================ */
  .schedule-card {
    position: relative;
    border-radius: 1.5rem;
    overflow: hidden;
  }

  .schedule-card::before {
    content: '';
    position: absolute;
    inset: -40% -20%;
    background:
      radial-gradient(circle at 0 0, rgb(var(--leaf-rgb) / 0.16), transparent 60%),
      radial-gradient(circle at 100% 0, rgb(var(--jacaranda-rgb) / 0.14), transparent 55%),
      radial-gradient(circle at 50% 100%, rgb(var(--clay-rgb) / 0.12), transparent 55%);
    opacity: 0.95;
    filter: blur(40px);
    pointer-events: none;
    z-index: 0;
  }

  .schedule-card > * {
    position: relative;
    z-index: 1;
  }

  /* ============================================================
     CALENDAR EVENT PILLS — semantic, stable
     ============================================================ */
  .event-pill {
    @apply inline-flex items-center gap-2 rounded-full border px-3 py-1.5
           text-xs font-semibold tracking-[0.06em] transition;
    background-color: rgb(var(--surface-strong-rgb) / 0.85);
    color: rgb(var(--ink-rgb) / 0.75);
    border-color: rgb(var(--border-rgb) / 0.9);
  }

  .event-pill:hover {
    border-color: rgb(var(--border-rgb) / 1);
  }

  .event-pill--class {
    background-color: rgb(var(--jacaranda-rgb) / 0.1);
    color: rgb(var(--jacaranda-rgb) / 1);
    border-color: rgb(var(--jacaranda-rgb) / 0.35);
  }

  .event-pill--meeting {
    background-color: rgb(var(--sky-rgb) / 0.1);
    color: rgb(var(--sky-rgb) / 1);
    border-color: rgb(var(--sky-rgb) / 0.35);
  }

  .event-pill--school {
    background-color: rgb(var(--leaf-rgb) / 0.1);
    color: rgb(var(--leaf-rgb) / 1);
    border-color: rgb(var(--leaf-rgb) / 0.35);
  }

  .event-pill--inactive {
    background-color: rgb(var(--surface-strong-rgb) / 0.85);
    color: rgb(var(--ink-rgb) / 0.65);
    border-color: rgb(var(--border-rgb) / 0.85);
  }

  .attendance-card {
    @apply rounded-2xl border shadow-sm;
    border-color: rgb(var(--border-rgb) / 0.80);
    background-color: rgb(var(--surface-rgb) / 1);
  }

  .attendance-card-header {
    @apply mb-2 flex items-center justify-between gap-3;
  }

  .attendance-card-body {
    @apply rounded-xl border px-3 py-3 shadow-inner;
    background-color: rgb(var(--surface-rgb) / 0.92);
    border-color: rgb(var(--border-rgb) / 0.60);
  }

  .remark-btn {
    @apply !h-9 !w-9 rounded-full border border-transparent transition;
    color: rgb(var(--slate-rgb) / 0.80);
  }

  .remark-btn:hover {
    border-color: rgb(var(--jacaranda-rgb) / 0.30);
    background-color: rgb(var(--jacaranda-rgb) / 0.10);
    color: rgb(var(--jacaranda-rgb) / 1);
  }

  .calendar-day {
    @apply flex items-center justify-center transition-transform ease-out duration-150
           border border-transparent bg-transparent;
  }

  .calendar-day--selected .calendar-day__badge {
    background: rgb(var(--jacaranda-rgb) / 1);
    color: rgb(var(--surface-strong-rgb) / 1);
    box-shadow: 0 4px 12px rgb(var(--jacaranda-rgb) / 0.4);
    transform: scale(1.1);
  }

  .calendar-day__badge {
    @apply inline-flex items-center justify-center rounded-full font-medium
           transition-all duration-150;
    height: 2.25rem;
    width: 2.25rem;
    border: 2px solid transparent;
    font-size: 0.9rem;
  }

  .calendar-day__badge--today {
    color: rgb(var(--jacaranda-rgb) / 1);
    border-color: rgb(var(--jacaranda-rgb) / 0.35);
    @apply font-bold;
  }

  .calendar-day__badge--meeting {
    background: rgb(var(--surface-strong-rgb) / 1);
    color: rgb(var(--jacaranda-rgb) / 1);
    border-color: rgb(var(--jacaranda-rgb) / 1);
    box-shadow: 0 1px 2px rgb(var(--jacaranda-rgb) / 0.15);
  }

  .calendar-day__badge--recorded {
    background: rgb(var(--leaf-rgb) / 0.06);
    color: rgb(var(--leaf-rgb) / 1);
    border-color: rgb(var(--leaf-rgb) / 1);
    box-shadow: 0 1px 2px rgb(var(--leaf-rgb) / 0.18);
    @apply font-semibold;
  }

  .calendar-day__badge--missing {
    background: rgb(var(--flame-rgb) / 0.04);
    color: rgb(var(--flame-rgb) / 1);
    border-color: rgb(var(--flame-rgb) / 1);
    box-shadow: 0 0 0 1px rgb(var(--flame-rgb) / 0.55);
    @apply font-semibold;
  }

  .calendar-day__badge--muted {
    color: rgb(var(--slate-rgb) / 0.35);
  }

  .calendar-day:hover .calendar-day__badge--meeting,
  .calendar-day:hover .calendar-day__badge--recorded,
  .calendar-day:hover .calendar-day__badge--missing {
    background: rgb(var(--surface-strong-rgb) / 0.96);
    transform: translateY(-1px);
  }

  .legend-dot {
    @apply rounded-full border-2 border-solid;
    height: 0.9rem;
    width: 0.9rem;
    background-color: rgb(var(--surface-strong-rgb) / 1);
  }

  .legend-dot--recorded {
    border-color: rgb(var(--leaf-rgb) / 1);
  }

  .legend-dot--scheduled {
    border-color: rgb(var(--jacaranda-rgb) / 1);
  }

  .legend-dot--missing {
    border-color: rgb(var(--flame-rgb) / 1);
  }

  /* Event detail overlays (calendar modals) */
  .meeting-modal__header {
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    gap: 1rem;
    padding: 1.5rem 1.5rem 0.5rem;
    flex-shrink: 0;
  }

  @media (min-width: 768px) {
    .meeting-modal__header {
      padding: 1.75rem 1.75rem 0.75rem;
    }
  }

  .meeting-modal__headline {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
  }

  .meeting-modal__eyebrow {
    color: rgb(var(--slate-rgb) / 0.75);
  }

  .meeting-modal__time {
    color: rgb(var(--slate-rgb) / 0.9);
  }

  .meeting-modal__timezone {
    margin-left: 0.25rem;
    color: rgb(var(--slate-rgb) / 0.8);
  }

  .meeting-modal__header-actions {
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }

  .meeting-modal__badge {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 0.15rem 0.55rem;
    border-radius: 9999px;
    background: rgb(var(--sand-rgb) / 0.8);
    color: rgb(var(--canopy-rgb) / 1);
  }

  .meeting-modal__desk-link,
  .meeting-modal__link {
    display: inline-flex;
    align-items: center;
    gap: 0.25rem;
    font-size: 0.75rem;
    font-weight: 500;
    color: rgb(var(--jacaranda-rgb) / 1);
    text-decoration: none;
  }

  .meeting-modal__desk-link:hover,
  .meeting-modal__link:hover {
    text-decoration: underline;
  }

  .meeting-modal__body {
    display: flex;
    flex-direction: column;
    gap: 1.75rem;
    padding: 1rem 1.5rem 1.5rem;
  }

  @media (min-width: 768px) {
    .meeting-modal__body {
      padding: 1.1rem 1.75rem 1.75rem;
    }
  }

  .meeting-modal__meta-grid {
    display: grid;
    gap: 1rem;
  }

  @media (min-width: 640px) {
    .meeting-modal__meta-grid {
      grid-template-columns: repeat(4, minmax(0, 1fr));
    }
  }

  .meeting-modal__label {
    color: rgb(var(--slate-rgb) / 0.7);
    margin-bottom: 0.15rem;
  }

  .meeting-modal__value {
    color: rgb(var(--ink-rgb) / 1);
  }

  .meeting-modal__section-heading {
    display: flex;
    align-items: baseline;
    justify-content: space-between;
    gap: 0.75rem;
    margin-bottom: 0.35rem;
  }

  .meeting-modal__agenda-content {
    border-radius: 0.75rem;
    border: 1px solid rgb(var(--border-rgb) / 0.85);
    background: rgb(var(--sky-rgb) / 0.18);
    padding: 0.75rem 0.85rem;
    font-size: 0.85rem;
    color: rgb(var(--slate-rgb) / 0.95);
  }

  .meeting-modal__participants {
    margin-top: 0.25rem;
  }

  .meeting-modal__chip-list {
    display: flex;
    flex-wrap: wrap;
    gap: 0.4rem;
    margin-top: 0.45rem;
  }

  .meeting-modal__chip {
    display: inline-flex;
    align-items: center;
    gap: 0.25rem;
    padding: 0.15rem 0.6rem;
    border-radius: 9999px;
    font-size: 0.75rem;
    font-weight: 500;
    background: rgb(var(--sky-rgb) / 0.8);
    color: rgb(var(--canopy-rgb) / 1);
  }

  .meeting-modal__chip-role {
    font-size: 0.7rem;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: rgb(var(--slate-rgb) / 0.9);
  }

  .meeting-modal__chip--muted {
    background: rgb(var(--sand-rgb) / 0.9);
    color: rgb(var(--slate-rgb) / 0.95);
  }

  .meeting-modal__empty {
    color: rgb(var(--slate-rgb) / 0.85);
  }

  .meeting-modal__loading {
    display: flex;
    flex-direction: column;
    gap: 0.6rem;
    margin-top: 0.25rem;
  }

  .meeting-modal__skeleton {
    border-radius: 9999px;
    background: linear-gradient(
      90deg,
      rgb(var(--sky-rgb) / 0.6),
      rgb(var(--sand-rgb) / 0.8),
      rgb(var(--sky-rgb) / 0.6)
    );
    background-size: 200% 100%;
    animation: meeting-modal-skeleton-pulse 1.4s ease-in-out infinite;
  }

  @keyframes meeting-modal-skeleton-pulse {
    0% {
      background-position: 0% 50%;
    }
    100% {
      background-position: 200% 50%;
    }
  }

  .meeting-modal__error {
    margin-top: 0.75rem;
    border-radius: 0.9rem;
    border: 1px solid rgb(var(--flame-rgb) / 0.35);
    background: rgb(var(--flame-rgb) / 0.05);
    padding: 0.75rem 0.9rem;
    font-size: 0.85rem;
    color: rgb(var(--flame-rgb) / 1);
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 0.75rem;
  }

  .meeting-modal__cta {
    border-radius: 9999px;
    border: 1px solid rgb(var(--flame-rgb) / 0.85);
    padding: 0.3rem 0.9rem;
    font-size: 0.8rem;
    font-weight: 500;
    background: rgb(var(--surface-strong-rgb) / 1);
    color: rgb(var(--flame-rgb) / 1);
  }

  .meeting-modal__cta:hover {
    background: rgb(var(--flame-rgb) / 0.06);
  }

  .meeting-modal__actions {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    margin-top: 0.5rem;
  }

  .meeting-modal__action-button {
    display: inline-flex;
    align-items: center;
    gap: 0.4rem;
    border-radius: 9999px;
    padding: 0.4rem 0.9rem;
    font-size: 0.8rem;
    font-weight: 500;
    text-decoration: none;
    border: 1px solid rgb(var(--leaf-rgb) / 0.9);
    background: rgb(var(--leaf-rgb) / 1);
    color: rgb(var(--surface-strong-rgb) / 1);
    box-shadow: 0 6px 18px rgb(var(--leaf-rgb) / 0.28);
  }

  .meeting-modal__action-button--secondary {
    border-color: rgb(var(--border-rgb) / 0.95);
    background: rgb(var(--surface-strong-rgb) / 1);
    color: rgb(var(--slate-rgb) / 0.9);
    box-shadow: 0 3px 10px rgb(var(--ink-rgb) / 0.06);
  }

  .meeting-modal__action-button:hover {
    transform: translateY(-1px);
  }

  .meeting-modal__color-pill {
    height: 0.3rem;
    width: 100%;
    border-radius: 9999px;
    margin-bottom: 0.9rem;
    background: rgb(var(--jacaranda-rgb) / 0.9);
  }

  /* ============================================================
     EVENT MODAL ZIPPER LINE — canonical
     ============================================================ */
  .if-overlay--class .if-overlay__panel {
    border-top: 4px solid rgb(var(--jacaranda-rgb) / 0.9);
  }

  .if-overlay--meeting .if-overlay__panel {
    border-top: 4px solid rgb(var(--flame-rgb) / 0.9);
  }

  .if-overlay--school .if-overlay__panel {
    border-top: 4px solid rgb(var(--leaf-rgb) / 0.9);
  }

  .if-overlay--meeting .meeting-modal__eyebrow {
    color: rgb(var(--flame-rgb) / 0.95);
  }

  .if-overlay--class .meeting-modal__eyebrow {
    color: rgb(var(--jacaranda-rgb) / 0.95);
  }

  .if-overlay--meeting .meeting-modal__badge {
    background: rgb(var(--flame-rgb) / 0.12);
    color: rgb(var(--flame-rgb) / 1);
  }

  .if-overlay--class .meeting-modal__badge {
    background: rgb(var(--jacaranda-rgb) / 0.12);
    color: rgb(var(--jacaranda-rgb) / 1);
  }

  .if-overlay--school .meeting-modal__eyebrow {
    color: rgb(var(--leaf-rgb) / 0.95);
  }

  .if-overlay--school .meeting-modal__badge {
    background: rgb(var(--leaf-rgb) / 0.1);
    color: rgb(var(--leaf-rgb) / 1);
  }

  .if-overlay--meeting .meeting-modal__color-pill {
    background: rgb(var(--flame-rgb) / 0.9);
  }

  .if-overlay--school .meeting-modal__color-pill {
    background: rgb(var(--leaf-rgb) / 0.9);
  }

	/* ============================================================
		FOCUS + STUDENT LOG FOLLOW-UP OVERLAY SKINS (style-only)
		============================================================ */

	/* Neutral-but-signaled zipper lines for these overlays */
	.if-overlay--focus .if-overlay__panel {
		border-top: 4px solid rgb(var(--jacaranda-rgb) / 0.9);
	}

	.if-overlay--student-log-follow-up .if-overlay__panel {
		/* Default to canopy (action). If you later add mode classes,
			you can override per mode (review = jacaranda). */
		border-top: 4px solid rgb(var(--canopy-rgb) / 0.9);
	}

	/* Optional: calmer overline tone inside these overlays */
	.if-overlay--focus .type-overline,
	.if-overlay--student-log-follow-up .type-overline {
		color: rgb(var(--slate-rgb) / 0.75);
	}

	/* ============================================================
		TEXTAREA / LONGFORM INPUT — canonical SPA skin
		Used by StudentLogFollowUpOverlay.vue
		============================================================ */
	.if-textarea {
		width: 100%;
		border-radius: var(--radius-xl);
		border: 1px solid rgb(var(--border-rgb) / 0.9);
		background-color: rgb(var(--sand-rgb) / 0.98);
		color: rgb(var(--ink-rgb) / 1);
		padding: 0.85rem 0.95rem;
		font-size: 0.95rem;
		line-height: 1.5;
		transition: border-color 150ms ease, box-shadow 150ms ease, background 150ms ease;
	}

	.if-textarea::placeholder {
		color: rgb(var(--slate-rgb) / 0.65);
	}

	.if-textarea:hover {
		border-color: rgb(var(--jacaranda-rgb) / 0.25);
	}

	.if-textarea:focus {
		outline: none;
		border-color: rgb(var(--jacaranda-rgb) / 0.55);
		box-shadow: 0 0 0 3px rgb(var(--jacaranda-rgb) / 0.22);
		background-color: rgb(var(--sand-rgb) / 1);
	}

	.if-textarea:disabled {
		opacity: 0.7;
		cursor: not-allowed;
	}

	/* ============================================================
		Overlay headers using meeting-modal rhythm
		Ensures FocusRouterOverlay + StudentLogFollowUpOverlay match.
		============================================================ */
	.if-overlay .meeting-modal__header {
		@apply px-5 pt-4 pb-3 flex items-start justify-between gap-4;
		border-bottom: 1px solid rgb(var(--border-rgb) / 0.6);
	}

	.if-overlay .meeting-modal__headline .type-overline {
		color: rgb(var(--slate-rgb) / 0.75);
	}

	/* Keep the close button feeling consistent across overlays */
	.if-overlay .meeting-modal__header-actions .if-overlay__icon-button {
		@apply rounded-xl border;
		border-color: rgb(var(--border-rgb) / 0.8);
		background: rgb(var(--surface-strong-rgb) / 0.7);
		box-shadow: var(--shadow-soft);
	}

	.if-overlay .meeting-modal__header-actions .if-overlay__icon-button:hover {
		background: rgb(var(--sky-rgb) / 0.75);
		border-color: rgb(var(--jacaranda-rgb) / 0.25);
	}



  /* ============================================================
     ANALYTICS SYSTEM
     ============================================================ */
  .analytics-shell {
    @apply w-full max-w-6xl mx-auto flex flex-col px-5 py-9 sm:px-6 gap-6;
  }

  .analytics-card {
    @apply border rounded-2xl shadow-sm overflow-hidden p-4 sm:p-5 flex flex-col gap-3;
    border-color: rgb(var(--border-rgb) / 0.90);
    background-color: rgb(var(--surface-rgb) / 0.98);
  }

  .analytics-card--interactive {
    @apply cursor-pointer transition-transform duration-200 hover:-translate-y-0.5 hover:shadow-md;
  }

  .analytics-card--dense {
    @apply p-3 sm:p-4;
  }

  .analytics-card__title {
    @apply text-xs font-semibold uppercase tracking-wide;
    color: rgb(var(--canopy-rgb) / 1);
  }

  .analytics-card__meta {
    @apply text-[0.7rem];
    color: rgb(var(--slate-rgb) / 0.75);
  }

  /* Avoid min-height on vue-echarts containers to prevent ResizeObserver loops. */
  .analytics-chart {
    width: 100%;
    height: 260px !important;
  }

  .analytics-chart--sm {
    height: 240px !important;
  }

  .analytics-chart--lg {
    height: 280px !important;
  }

  .analytics-chart--xl {
    height: 320px !important;
  }

  .analytics-chart--expanded {
    height: min(520px, 70vh) !important;
  }

  .analytics-filters {
    @apply rounded-2xl border px-4 py-3 shadow-sm flex flex-wrap items-center gap-3 mb-4;
    background-color: rgb(var(--surface-rgb) / 0.92);
    border-color: rgb(var(--border-rgb) / 0.80);
  }

  /* ============================================================
     SCOPED FILTER SKIN
     ============================================================ */
  .ifit-filters select,
  .ifit-filters input[type="text"],
  .ifit-filters input[type="search"],
  .ifit-filters input[type="email"],
  .ifit-filters input[type="password"],
  .ifit-filters input[type="number"],
  .ifit-filters input[type="date"],
  .ifit-filters textarea {
    background-color: rgb(var(--sand-rgb) / 0.98);
    border-color: rgb(var(--border-rgb) / 0.90);
    color: rgb(var(--ink-rgb) / 1);
  }

  .ifit-filters .form-control,
  .ifit-filters .control-input,
  .ifit-filters [role="combobox"] {
    background-color: rgb(var(--sand-rgb) / 0.98);
    border-color: rgb(var(--border-rgb) / 0.90);
    color: rgb(var(--ink-rgb) / 1);
  }

  .ifit-filters select:hover,
  .ifit-filters input:hover,
  .ifit-filters textarea:hover,
  .ifit-filters .form-control:hover,
  .ifit-filters .control-input:hover,
  .ifit-filters [role="combobox"]:hover {
    border-color: rgb(var(--jacaranda-rgb) / 0.25);
  }

  .ifit-filters select:focus,
  .ifit-filters input:focus,
  .ifit-filters textarea:focus,
  .ifit-filters .form-control:focus-within,
  .ifit-filters [role="combobox"]:focus-visible {
    border-color: rgb(var(--jacaranda-rgb) / 0.55) !important;
    box-shadow: 0 0 0 3px rgb(var(--jacaranda-rgb) / 0.22) !important;
    outline: none;
  }

  .ifit-filters input::placeholder,
  .ifit-filters textarea::placeholder {
    color: rgb(var(--slate-rgb) / 0.65);
  }

  .ifit-filters input[type="checkbox"]:focus-visible {
    box-shadow: 0 0 0 3px rgb(var(--jacaranda-rgb) / 0.22) !important;
    outline: none;
  }

  /* ============================================================
     TELEPORTED MENU SKINS
     ============================================================ */
  .dropdown-menu {
    background-color: rgb(var(--sand-rgb) / 0.98);
    border: 1px solid rgb(var(--border-rgb) / 0.90);
    color: rgb(var(--ink-rgb) / 1);
  }

  [role="listbox"],
  [role="menu"] {
    background-color: rgb(var(--sand-rgb) / 0.98);
    border: 1px solid rgb(var(--border-rgb) / 0.90);
    color: rgb(var(--ink-rgb) / 1);
  }

  .dropdown-item:hover,
  .dropdown-item:focus-visible,
  [role="option"]:hover,
  [role="menuitem"]:hover {
    background-color: rgb(var(--sky-rgb) / 0.28);
    color: rgb(var(--ink-rgb) / 1);
  }

  /* ============================================================
     MISC TRANSITIONS
     ============================================================ */
  .content-dialog-fade-enter-active,
  .content-dialog-fade-leave-active {
    transition: opacity 0.18s ease-out;
  }

  .content-dialog-fade-enter-from,
  .content-dialog-fade-leave-to {
    opacity: 0;
  }

  /* ============================================================
     LEGACY CANDIDATES - moved for audit (do not delete yet)
     Delete only after runtime coverage / user confirmation.
     ============================================================ */
  .card-surface-muted {
    @apply rounded-xl border shadow-sm;
    border-color: rgb(var(--border-rgb) / 0.65);
    background: rgb(var(--surface-rgb) / 0.88);
  }

  .paper-card-frosted {
    background:
      linear-gradient(
        180deg,
        rgb(var(--sky-rgb) / 0.92),
        rgb(var(--sand-rgb) / 0.9)
      );
    @apply border rounded-2xl shadow-sm backdrop-blur-md;
    border-color: rgb(var(--border-rgb) / 0.85);
  }

  .toolbar {
    @apply rounded-2xl border px-4 py-3 shadow-sm flex flex-wrap items-center gap-3 mb-2;
    background-color: rgb(var(--surface-rgb) / 0.92);
    border-color: rgb(var(--border-rgb) / 0.80);
  }

  .ifitwala-popover {
    @apply fixed z-50 max-w-xl p-4 rounded-2xl border text-sm;
    background-color: rgb(var(--surface-strong-rgb) / 1);
    border-color: rgb(var(--border-rgb) / 0.85);
    box-shadow: var(--shadow-strong);
    color: rgb(var(--slate-rgb) / 0.9);
  }

  .staff-layout__desk-switch-icon {
    @apply h-4 w-4;
  }

  .chip-alert {
    background: rgb(var(--flame-rgb) / 0.15);
    color: rgb(var(--flame-rgb) / 1);
    border-color: transparent;
  }

  .inline-chip--health {
    background-color: rgb(var(--flame-rgb) / 0.12);
    color: rgb(var(--flame-rgb) / 1);
  }

  .inline-chip--birthday {
    background-color: rgb(var(--sand-rgb) / 0.65);
    color: rgb(var(--clay-rgb) / 1);
  }

  .action-rail__grid {
    @apply grid gap-3 mt-4 sm:gap-4
           grid-cols-[repeat(auto-fit,minmax(14rem,1fr))];
  }

  .block-card {
    @apply flex flex-col gap-3 p-3 rounded-xl border shadow-sm;
    background-color: rgb(var(--surface-rgb) / 0.98);
    border-color: rgb(var(--border-rgb) / 0.85);
  }

  .remark-btn--active {
    border-color: rgb(var(--jacaranda-rgb) / 0.40);
    background-color: rgb(var(--jacaranda-rgb) / 0.15);
    color: rgb(var(--jacaranda-rgb) / 1);
  }

  .analytics-grid {
    @apply grid gap-4 md:gap-6
           grid-cols-1 md:grid-cols-2 xl:grid-cols-3;
  }

  .analytics-card--wide {
    @apply md:col-span-2;
  }

  .analytics-empty {
    @apply text-xs mt-1;
    color: rgb(var(--slate-rgb) / 0.70);
  }

  .analytics-filters__title {
    @apply text-xs font-semibold uppercase tracking-wide;
    color: rgb(var(--slate-rgb) / 0.80);
  }
}

<!-- base_template: ifitwala_ed/templates/sp_base.html -->
 
{% set page_title = _("Courses") %}

{% block page_actions %}
	{% if academic_years and academic_years|length %}
	<form method="get" class="d-inline-block">
		<label for="year" class="visually-hidden">{{ _("Academic Year") }}</label>
		<select name="year" id="year" class="form-select form-select-sm" onchange="this.form.submit()">
			{% for y in academic_years %}
				<option value="{{ y }}"{% if y == selected_year %} selected{% endif %}>{{ y }}</option>
			{% endfor %}
		</select>
	</form>
	{% endif %}
{% endblock %}

{% block content %}
<section aria-labelledby="coursesLabel" class="mb-4">
	<div class="d-flex align-items-center justify-content-between mb-2">
		<h2 id="coursesLabel" class="h5 mb-0">{{ _("My Courses") }}</h2>
	</div>

	<div id="course-cards" class="row g-3">
		{% if courses and courses|length %}
			{% for c in courses %}
			<div class="col-12 col-sm-6 col-lg-4">
				<div class="card h-100 shadow-sm course-card">
					<div class="ratio ratio-16x9">
						<img
							src="{{ c.course_image }}"
							alt="{{ c.course_name }}"
							class="course-card-img"
							loading="lazy"
							onerror="this.onerror=null; this.src='/assets/ifitwala_ed/images/course_placeholder.jpg';"
						>
					</div>
					<div class="card-body py-2">
						<div class="fw-semibold small mb-1">{{ c.course_name }}</div>
						<div class="course-meta small text-muted">{{ c.course_group or 'â€”' }}</div>
					</div>
					<a class="stretched-link" href="{{ c.href }}" aria-label="Open {{ c.course_name }}"></a>
				</div>
			</div>
			{% endfor %}
		{% else %}
			<div class="col-12">
				<div class="alert alert-light border small mb-0">
					{{ courses_empty_reason or _("No courses found.") }}
				</div>
			</div>
		{% endif %}
	</div>
</section>
{% endblock %}

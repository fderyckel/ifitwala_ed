<!-- ifitwala_ed/website/blocks/hero.html -->
{% import "ifitwala_ed/templates/includes/smart_image_macro.html" as img_macro %}
{% set slides = data.images or [] %}

<section class="block-hero">
	{% if slides %}
		<div class="relative w-full overflow-hidden" data-carousel data-interval="{{ data.interval }}" data-autoplay="{{ data.autoplay }}">
			{% for slide in slides %}
				<div class="absolute inset-0 transition-opacity duration-700 {{ 'opacity-100 z-10' if loop.index == 1 else 'opacity-0 z-0' }}" data-carousel-slide>
					{% if slide.image and slide.image.original %}
						{{ img_macro.smart_image(
							slide.image.hero,
							slide.image.medium,
							slide.image.card,
							slide.image.thumb,
							slide.image.original,
							slide.alt or data.title or "Hero image",
							"w-full h-[60vh] object-cover",
							fallback="carousel"
						) }}
					{% endif %}
					{% if slide.caption %}
						<div class="absolute bottom-4 right-4 max-w-[60%] rounded bg-black/60 px-3 py-2 text-sm text-white">
							{{ slide.caption }}
						</div>
					{% endif %}
				</div>
			{% endfor %}
			<button type="button" class="absolute left-4 top-1/2 -translate-y-1/2 rounded-full bg-white/80 px-3 py-2 text-sm" data-carousel-prev>
				Prev
			</button>
			<button type="button" class="absolute right-4 top-1/2 -translate-y-1/2 rounded-full bg-white/80 px-3 py-2 text-sm" data-carousel-next>
				Next
			</button>
		</div>
	{% elif data.image and data.image.original %}
		<div class="w-full overflow-hidden">
			{{ img_macro.smart_image(
				data.image.hero,
				data.image.medium,
				data.image.card,
				data.image.thumb,
				data.image.original,
				data.title or "Hero image",
				"w-full h-[60vh] object-cover",
				fallback="carousel"
			) }}
		</div>
	{% endif %}

	<div class="mx-auto max-w-5xl px-6 py-10 text-center">
		<h1 class="text-4xl font-semibold text-slate-900">{{ data.title }}</h1>
		{% if data.subtitle %}
			<p class="mt-4 text-lg text-slate-600">{{ data.subtitle }}</p>
		{% endif %}
		{% if data.cta_label and data.cta_link %}
			<a href="{{ data.cta_link }}" class="mt-6 inline-flex items-center rounded-md bg-slate-900 px-6 py-3 text-base font-semibold text-white">
				{{ data.cta_label }}
			</a>
		{% endif %}
	</div>
</section>
